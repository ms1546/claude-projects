# PRãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œã‚¬ã‚¤ãƒ‰ï¼ˆAgentå‘ã‘ï¼‰

## æ¦‚è¦
ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€GitHub PRãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®å¯¾å¿œæ–¹æ³•ã‚’AgentãŒåŠ¹ç‡çš„ã«å‡¦ç†ã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

## ã‚ˆãã‚ã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã¨å¯¾å¿œæ–¹æ³•

### 1. ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã®æ”¹è¡Œä¸è¶³ï¼ˆNo Newline at End of Fileï¼‰

#### æ¤œå‡ºæ–¹æ³•
```bash
# æ”¹è¡ŒãŒãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢
find . -type f -name "*.swift" -exec sh -c 'tail -c1 {} | read -r _ && echo {}' \;

# ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¾Œã®æ–‡å­—ã‚’ç¢ºèª
tail -c 5 "filename.swift" | od -c
```

#### ä¿®æ­£æ–¹æ³•
```bash
# ã™ã¹ã¦ã®Swiftãƒ•ã‚¡ã‚¤ãƒ«ã«æ”¹è¡Œã‚’è¿½åŠ ï¼ˆå­˜åœ¨ã—ãªã„å ´åˆã®ã¿ï¼‰
find . -name "*.swift" -type f -exec sh -c 'tail -c1 {} | read -r _ || echo >> {}' \;

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã«å¯¾ã—ã¦å®Ÿè¡Œ
find . -type f \( -name "*.swift" -o -name "*.yml" -o -name "*.plist" \) -exec sh -c 'tail -c1 {} | read -r _ || echo >> {}' \;
```

#### å†ç™ºé˜²æ­¢ç­–
1. **CLAUDE.mdã«è¨˜è¼‰æ¸ˆã¿** - ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ”¹è¡Œã®é‡è¦æ€§ã‚’æ˜è¨˜
2. **SwiftLintè¨­å®š** - `.swiftlint.yml`ã«`trailing_newline`ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ 
3. **ã‚¨ãƒ‡ã‚£ã‚¿è¨­å®š** - VSCodeã€Xcodeã§è‡ªå‹•æ”¹è¡Œã‚’æœ‰åŠ¹åŒ–

### 2. PRã‚³ãƒ¡ãƒ³ãƒˆã¸ã®è¿”ä¿¡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

#### ä¿®æ­£å®Œäº†æ™‚
```bash
gh pr comment [PRç•ªå·] --body "@[ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼å] 
ã”æŒ‡æ‘˜ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
ä»¥ä¸‹ã®å¯¾å¿œã‚’å®Œäº†ã—ã¾ã—ãŸã®ã§ã€ã”ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚

**ä¿®æ­£å†…å®¹:**
- âœ… [å…·ä½“çš„ãªä¿®æ­£å†…å®¹1]
- âœ… [å…·ä½“çš„ãªä¿®æ­£å†…å®¹2]

**ç¢ºèªæ–¹æ³•:**
\`\`\`bash
# ä¿®æ­£ç¢ºèªã‚³ãƒãƒ³ãƒ‰
[ç¢ºèªã‚³ãƒãƒ³ãƒ‰]
\`\`\`

**å†ç™ºé˜²æ­¢ç­–:**
- [å®Ÿæ–½ã—ãŸå¯¾ç­–1]
- [å®Ÿæ–½ã—ãŸå¯¾ç­–2]
"
```

#### è³ªå•ãƒ»ç¢ºèªãŒå¿…è¦ãªå ´åˆ
```bash
gh pr comment [PRç•ªå·] --body "@[ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼å]
ã”ç¢ºèªã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®ç‚¹ã«ã¤ã„ã¦ç¢ºèªã•ã›ã¦ãã ã•ã„ï¼š
- ğŸ¤” [è³ªå•å†…å®¹1]
- ğŸ¤” [è³ªå•å†…å®¹2]

ç¾åœ¨ã®å®Ÿè£…ã§ã¯[ç¾çŠ¶ã®èª¬æ˜]ã¨ãªã£ã¦ã„ã¾ã™ãŒã€
[ä»£æ›¿æ¡ˆ]ã«ã¤ã„ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ
"
```

### 3. ãƒ–ãƒ©ãƒ³ãƒæ“ä½œã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### Worktreeä½¿ç”¨æ™‚ã®æ³¨æ„
```bash
# worktreeã®çŠ¶æ…‹ç¢ºèª
git worktree list

# worktreeãŒå£Šã‚ŒãŸå ´åˆã®ä¿®å¾©
git worktree prune

# æ–°ã—ã„worktreeã‚’ä½œæˆ
git worktree add -b feature/fix-review ../fix-review origin/feature/branch-name
```

#### ç¾åœ¨ã®å¤‰æ›´ã‚’ä¿æŒã—ãªãŒã‚‰PRãƒ–ãƒ©ãƒ³ãƒã§ä½œæ¥­
```bash
# 1. ç¾åœ¨ã®å¤‰æ›´ã‚’é€€é¿
git stash push -m "WIP: current work"

# 2. PRãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ
git checkout feature/pr-branch

# 3. ä¿®æ­£ä½œæ¥­ã‚’å®Ÿæ–½
# ...

# 4. ä¿®æ­£ã‚’ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥
git add -A
git commit -m "fix: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜å¯¾å¿œ"
git push

# 5. å…ƒã®ãƒ–ãƒ©ãƒ³ãƒã«æˆ»ã‚‹
git checkout main
git stash pop
```

### 4. è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### PRä¿®æ­£å¯¾å¿œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# pr-fix.sh

PR_NUMBER=$1
REVIEW_ITEM=$2

case "$REVIEW_ITEM" in
  "newline")
    echo "ğŸ”§ ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã®æ”¹è¡Œã‚’ä¿®æ­£ä¸­..."
    find . -name "*.swift" -type f -exec sh -c 'tail -c1 {} | read -r _ || echo >> {}' \;
    find . -name "*.yml" -type f -exec sh -c 'tail -c1 {} | read -r _ || echo >> {}' \;
    echo "âœ… æ”¹è¡Œã®ä¿®æ­£å®Œäº†"
    ;;
  "format")
    echo "ğŸ”§ ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å®Ÿè¡Œä¸­..."
    swiftlint autocorrect
    echo "âœ… ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå®Œäº†"
    ;;
  *)
    echo "âŒ ä¸æ˜ãªä¿®æ­£é …ç›®: $REVIEW_ITEM"
    exit 1
    ;;
esac

# å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ
if [[ -n $(git status --porcelain) ]]; then
  git add -A
  git commit -m "fix: PR #$PR_NUMBER - $REVIEW_ITEM ä¿®æ­£"
  echo "ğŸ“ ã‚³ãƒŸãƒƒãƒˆå®Œäº†"
fi
```

### 5. ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

PRä½œæˆå‰ã®ç¢ºèªäº‹é …ï¼š
- [ ] ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ”¹è¡Œã§çµ‚ã‚ã£ã¦ã„ã‚‹
- [ ] SwiftLintã‚¨ãƒ©ãƒ¼ãŒãªã„
- [ ] ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹
- [ ] ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¦ç´„ã«å¾“ã£ã¦ã„ã‚‹

### 6. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### "Already checked out in worktree"ã‚¨ãƒ©ãƒ¼
```bash
# ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸworktreeã‚’ç¢ºèª
git worktree list

# ä¸è¦ãªworktreeã‚’å‰Šé™¤
git worktree remove [path]

# ã¾ãŸã¯å¼·åˆ¶çš„ã«ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
git checkout -f feature/branch-name
```

#### GitHub APIã®æ¨©é™ã‚¨ãƒ©ãƒ¼
```bash
# ãƒˆãƒ¼ã‚¯ãƒ³ã®æ¨©é™ã‚’ç¢ºèª
gh auth status

# å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—ï¼šrepo, read:org
# .envãƒ•ã‚¡ã‚¤ãƒ«ã®GITHUB_PERSONAL_ACCESS_TOKENã‚’æ›´æ–°
```

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [PR Comment Setup Guide](/docs/setup/pr_comment_setup.md)
- [CLAUDE.md](/CLAUDE.md) - ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- [GitHub API Documentation](https://docs.github.com/en/rest)