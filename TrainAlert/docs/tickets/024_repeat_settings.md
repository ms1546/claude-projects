# Ticket #024: 繰り返し設定機能

## 概要
毎日同じ電車に乗る場合の繰り返し通知機能を実装する。

## 優先度: Medium
## 見積もり: 8h
## ステータス: [ ] Not Started / [ ] In Progress / [ ] Completed

## タスク
### UI実装
- [ ] 繰り返し設定UI
  - [ ] 繰り返しON/OFFトグル
  - [ ] パターン選択（毎日/平日/週末）
  - [ ] カスタム曜日選択UI
  - [ ] 設定内容のプレビュー表示

### データモデル実装
- [ ] Core Dataモデル拡張
  - [ ] isRepeatingフィールド追加
  - [ ] repeatPatternフィールド追加
  - [ ] repeatDaysフィールド追加（曜日配列）
  - [ ] マイグレーション対応

### 通知スケジューリング
- [ ] 繰り返し通知のスケジューリング
  - [ ] UNCalendarNotificationTrigger実装
  - [ ] 曜日指定ロジック
  - [ ] 複数通知の管理
- [ ] 次回通知時刻の計算ロジック
  - [ ] 現在時刻から次の通知時刻を算出
  - [ ] 曜日パターンの考慮
  - [ ] 表示フォーマット処理

### ビジネスロジック
- [ ] 繰り返しパターン処理
  - [ ] 毎日パターンの実装
  - [ ] 平日パターンの実装（月〜金）
  - [ ] 週末パターンの実装（土日）
  - [ ] カスタム曜日の実装
- [ ] 繰り返し設定の編集機能
  - [ ] 既存設定の読み込み
  - [ ] 更新処理
  - [ ] 通知の再スケジューリング

### 追加機能（将来対応）
- [ ] 祝日カレンダー対応
  - [ ] 祝日データの取得
  - [ ] 平日パターンからの除外
  - [ ] ユーザー設定オプション

## 実装ガイドライン
- iOSの通知システムの制限を考慮（最大64個の通知）
- ユーザーが理解しやすい曜日表示
- 既存の通知を削除してから新規登録
- 次回通知予定は常に表示

## 完了条件（Definition of Done）
- [ ] 繰り返しパターンを選択できる
- [ ] 設定した曜日に通知が来る
- [ ] 繰り返し設定を解除できる
- [ ] 次回通知予定が表示される

## テスト方法
1. 各パターンでの通知動作確認
2. 曜日をまたぐテスト
3. 繰り返し設定の変更テスト
4. 通知の重複がないことを確認

## 依存関係
- チケット#022（基本実装）

## 成果物
- RepeatSettingsView.swift
- RepeatPattern.swift（enum定義）
- TimetableAlert+Extension.swift
- RepeatNotificationScheduler.swift

## 備考
- 祝日対応は将来的な拡張として実装
- 通知数の上限に注意が必要