# Ticket #026: 乗り換え対応機能

## 概要
乗り換えが必要な経路で、乗り換え駅での通知機能を実装する（シンプル版）。

## 優先度: Low
## 見積もり: 16h
## ステータス: [ ] Not Started / [ ] In Progress / [ ] Completed

## タスク
### データモデル実装
- [ ] 乗り換え経路データモデル
  - [ ] TransferRoute構造体定義
  - [ ] RouteSection構造体定義
  - [ ] 乗り換え駅情報の保持
- [ ] Core Dataモデル拡張
  - [ ] 複数区間の保存
  - [ ] 乗り換え情報の保存
  - [ ] リレーションシップ設定

### UI実装
- [ ] 複数区間の設定UI
  - [ ] 区間追加/削除機能
  - [ ] 各区間の電車選択
  - [ ] 乗り換え駅の表示
- [ ] 経路全体の表示UI
  - [ ] 路線図風の表示
  - [ ] 各区間の色分け
  - [ ] 乗り換えポイントの強調
- [ ] 乗り換え設定の編集UI
  - [ ] 既存経路の読み込み
  - [ ] 区間ごとの編集
  - [ ] 全体プレビュー

### ビジネスロジック
- [ ] 乗り換え駅での通知ロジック
  - [ ] 乗り換え駅到着検知
  - [ ] 通知内容の生成
  - [ ] 次の電車情報の含有
- [ ] 複数通知の管理
  - [ ] 各区間での通知設定
  - [ ] 乗り換え通知の追加
  - [ ] 通知IDの管理

### 通知実装
- [ ] 乗り換え通知の内容
  - [ ] 「乗り換えてください」メッセージ
  - [ ] 次の電車の情報表示
  - [ ] プラットフォーム情報（可能な場合）
- [ ] 通知のスケジューリング
  - [ ] 各区間の通知設定
  - [ ] 乗り換え駅での追加通知
  - [ ] 全体の通知管理

## 実装ガイドライン
- 初期版はシンプルに2〜3区間まで対応
- 複雑な乗り換えは将来拡張
- 乗り換え時間は考慮しない（初期版）
- UIは直感的で分かりやすく

## 完了条件（Definition of Done）
- [ ] 乗り換え経路を設定できる
- [ ] 乗り換え駅で通知が来る
- [ ] 次の電車情報が確認できる
- [ ] 全体の経路が視覚的に分かる

## テスト方法
1. 2区間の乗り換え設定
2. 3区間の乗り換え設定
3. 各通知タイミングの確認
4. 乗り換え駅での通知内容確認

## 依存関係
- チケット#022（基本実装）

## 成果物
- TransferRoute.swift
- TransferSetupView.swift
- TransferRouteView.swift
- TransferNotificationManager.swift

## 備考
- 初期版はシンプルな実装
- 将来的には乗り換え時間も考慮