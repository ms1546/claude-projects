# チケット #023: 駅数ベース通知機能

## 概要
到着駅の○駅前で通知する機能を実装する。

## 要件
1. **駅数指定**
   - 1〜10駅前で設定可能
   - 設定時に「どの駅で通知されるか」をプレビュー表示

2. **種別対応**
   - 快速・特快等は停車駅のみカウント
   - 通過駅は含めない

3. **UI改善**
   - 通知タイミング選択（時間 or 駅数）
   - 駅リストのビジュアル表示

## 技術仕様
### APIエンドポイント
```
GET /api/v4/odpt:TrainTimetable
?acl:consumerKey={API_KEY}
&odpt:trainNumber={列車番号}
&odpt:calendar={カレンダー}
```

### ロジック
- 選択した電車の停車駅リストを取得
- 到着駅から逆算して通知駅を特定
- 該当駅の到着予定時刻で通知設定

## 実装タスク
- [ ] TrainTimetable APIクライアント実装
- [ ] 停車駅リスト取得機能
- [ ] 駅数カウントロジック
- [ ] 通知駅プレビューUI
- [ ] 駅数/時間切り替えUI
- [ ] Core Dataモデル拡張

## 受け入れ条件
- [ ] 駅数で通知タイミングを設定できる
- [ ] 通知される駅が事前に確認できる
- [ ] 快速等の種別に対応している
- [ ] 正しいタイミングで通知される

## ステータス: [ ] Not Started / [ ] In Progress / [ ] Completed

## 見積もり工数
12時間

## 依存関係
- チケット#022（基本実装）
