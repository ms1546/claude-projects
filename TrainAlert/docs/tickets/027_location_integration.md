# チケット #027: 位置情報連携機能

## 概要
時刻表ベースの通知と位置情報を組み合わせて、より正確な通知を実現する。

## 要件
1. **位置情報との連携**
   - 時刻表での予定と実際の位置を照合
   - ズレがある場合は補正

2. **精度向上**
   - GPSで実際に駅に近づいたことを検知
   - 時刻表と位置情報の両方で判定

3. **フォールバック**
   - GPS不調時は時刻表のみで動作
   - 地下鉄等でのGPS精度低下に対応

## 技術仕様
### ロジック
- 時刻表ベースでの通知をメインとする
- 位置情報で実際の到着を確認
- 両者にズレがある場合は調整

### 実装方法
```swift
class HybridNotificationManager {
    // 時刻表ベースの予定
    let scheduledArrival: Date
    
    // 位置情報ベースの検知
    func detectStationProximity() -> Bool
    
    // ハイブリッド判定
    func shouldNotify() -> Bool
}
```

## 実装タスク
- [ ] 位置情報と時刻表の照合ロジック
- [ ] 駅接近検知の精度向上
- [ ] ズレ検出と補正機能
- [ ] GPS精度に応じた動作切り替え
- [ ] バッテリー消費の最適化
- [ ] デバッグ用の状態表示

## 受け入れ条件
- [ ] 時刻表と位置情報の両方で判定される
- [ ] GPS不調時も通知が動作する
- [ ] より正確なタイミングで通知される
- [ ] バッテリー消費が過度でない

## ステータス: [ ] Not Started / [ ] In Progress / [ ] Completed

## 見積もり工数
16時間

## 依存関係
- チケット#022（基本実装）
- チケット#004（位置情報サービス実装）- 完了済み
