# 電車寝過ごし防止アプリ「TrainAlert」要件定義書

## 1. プロジェクト概要

### 1.1 目的
電車での移動中に寝過ごしを防止し、目的の駅で確実に降車できるようサポートするiOSアプリケーション

### 1.2 ターゲットユーザー
- 電車通勤・通学者
- 長距離移動で仮眠を取りたい利用者
- 疲労により寝過ごしリスクがある利用者

### 1.3 配布方法
- TestFlight（趣味プロジェクト）
- 商用配布は予定なし

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 降車駅アラート機能
- **位置情報ベースアラート**
  - GPS位置情報を使用して降車駅接近を検知
  - 設定した距離（例：駅から1km）に到達したら通知
  - バックグラウンドでの位置情報追跡

- **時刻ベースアラート**
  - 予定到着時刻の数分前に通知
  - 遅延情報を考慮した通知時刻の自動調整

#### 2.1.2 通知機能
- プッシュ通知での降車案内
- バイブレーションでの物理的アラート
- 通知の繰り返し設定（スヌーズ機能）
- **AI生成通知メッセージ**
  - ChatGPT APIを使用したメッセージ生成
  - 複数のキャラクタースタイル選択（ギャル系、執事系、関西弁系など）
  - ユーザーが目覚めやすいカスタマイズ可能なメッセージ

#### 2.1.3 駅情報管理
- 駅名検索機能
- 最寄り駅の自動検出
- よく使う駅の登録（お気に入り）

### 2.2 追加機能（フェーズ2以降）
- 履歴機能
- Apple Watch連携
- ウィジェット対応
- 複数アラート設定

## 3. 非機能要件

### 3.1 パフォーマンス
- アプリ起動時間：3秒以内
- 位置情報更新頻度：省電力を考慮した適切な間隔
- バッテリー消費：最小限に抑える

### 3.2 使いやすさ
- 直感的なUI設計
- 最小限のタップで設定完了
- ダークモード対応

### 3.3 信頼性
- オフライン時の動作保証（時刻ベース通知）
- バックグラウンド動作の安定性
- 通知の確実な配信

### 3.4 セキュリティ・プライバシー
- 位置情報は端末内のみで処理
- 個人情報の収集なし
- 必要最小限の権限要求

## 4. 制約事項

### 4.1 技術的制約
- iOS 16.0以上
- iPhone専用（iPadは対象外）
- インターネット接続（駅情報取得時のみ）

### 4.2 リソース制約
- 個人開発のため機能は段階的に実装
- 無料APIの利用制限内での実装

## 5. 用語定義
- **降車駅**: ユーザーが降りる予定の駅
- **アラート**: 降車を促す通知全般
- **遅延情報**: 鉄道会社が提供する運行遅延データ

## 6. 成功基準
- 設定した駅で確実に通知が届く
- バッテリー消費が日常利用に支障ない
- 3タップ以内で基本設定が完了
